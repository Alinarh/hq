<div class="page-header">
  <h1>Заявления на материальную помощь</h1>
</div>

<%= form_tag nil, method: :get, class: 'form-horizontal filters' do %>
  <div class="form-group">
    <div class="col-sm-2">
      <%= select_tag :year,
                     options_for_select((2013..Date.today.year).to_a, params[:year]),
                     class: 'form-control' %>
    </div>

    <div class="col-sm-8">
      <%= multiselect_tag :causes, title: 'Причины', collection: My::SupportCause.all,
                          value: :id, text: :title, current: params[:causes].map(&:to_i),
                          pl1: 'Выбрана %c причина',
                          pl2: 'Выбраны %c причины',
                          pl5: 'Выбрано %c причин' %>
    </div>

    <div class="col-sm-2">
      <%= submit_tag 'Поиск', class: 'btn btn-primary form-control' %>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-2">
      <%= select_tag :month,
                     options_for_select(
                         (1..12).map { |m| [t('date.standalone_month_names')[m], m] },
                         params[:month].to_i
                     ),
                     class: 'form-control' %>
    </div>
    <div class="col-sm-8">
    </div>
  </div>
<% end %>

<%= paginate_with_info @applications %>

<% unless @applications.empty? %>
  <div class="row lead">
    <div class="col-sm-1">
      #
    </div>
    <div class="col-sm-11">
      Студент
    </div>
  </div>
<% else %>
  <p class="lead">Не подано ни одного заявления.</p>
<% end %>

<%= render partial: 'application', collection: @applications %>

<%= paginate @applications %>
